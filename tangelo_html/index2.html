<html lang="en">

<head>
	<title>XDATA: Track Communities</title>
	<meta charset="utf-8">
	
	<!-- Stylesheets -->

	<link rel="stylesheet" href="lib/tangelo/css/tangelo.css" type="text/css">
	<link rel="stylesheet" href="lib/select2/select2.css" type="text/css">
	<link rel="stylesheet" href="lib/select2/select2-bootstrap.css" type="text/css">
	<link rel="stylesheet" href="lib/jquery-toggles/toggles.css" type="text/css">
	<link rel="stylesheet" href="lib/d3/css/d3.slider.css" type="text/css">
	<style type="text/css">
		#map-canvas {
			width:100%;
			height:100%;
		}
		div#tangelo-control-panel.control-panel {
		}
		div#tangelo-drawer-handle.centered.pointer.drawer {
		}
		.graticule {
		  fill: none;
		  stroke: #fff;
		  stroke-width: .5px;
		  stroke-opacity: .5;
		}
		.land {
		  fill: #d7c7ad;
		  stroke: #766951;
		  stroke-width: 1;
		}
		.boundary {
			fill: none;
			stroke: #a5967e;
		}
		.background {
			fill: #a4bac7;
		}
		.geojson {
			fill: none;
			stroke: red;
			stroke-width: 2;
			opacity: .5;
		}
		.SvgOverlay svg {
			position: absolute;
			top: -4000px;
			left: -4000px;
			width: 8000px;
			height: 8000px;
		}
	</style>
	
	<!-- Scripts/Libraries -->
	<script type="text/javascript" src="lib/jquery/jquery-2.1.0.min.js"></script>
	<script type="text/javascript" src="lib/tangelo/js/tangelo.js"></script>
	<script type="text/javascript" src="lib/d3/js/d3.v3.min.js"></script>
	<script type="text/javascript" src="lib/d3/js/d3.slider.js"></script>
	<script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="lib/select2/select2.js"></script>
	<script type="text/javascript" src="lib/jquery-toggles/toggles.min.js"></script>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization"></script>
	<script type="text/javascript" src="js/Number.js"></script>
	<script type="text/javascript" src="js/app/config.js"></script> 
	<script type="text/javascript" src="js/app/util.coordinates.js"></script> 
	<script type="text/javascript" src="js/app/util.graph.js"></script>
	<script type="text/javascript" src="js/app/util.map.js"></script>

</head>

<body>
	
	<div class="container-fluid" style="width:95%; height: 85%;">
		<div class="row-fluid">
			<div class="span12" style="">
				<!-- Utilize Tangelo utility to construct Bootstrap-based navigation bar -->
				<div data-tangelo-type="navbar" data-tangelo-brand="XDATA" data-tangelo-brand-href="#" data-tangelo-app="Track Communities" data-config-load="showConfig" data-config-save="updateConfig">
					<div data-tangelo-type="config">
					
						<h4> Load </h4>
						<p> Data Table: <input type="hidden" id="track-table" /> <br/> </p>
						<p> Enable Heatmap: <input type="checkbox" id="heatMapEnabled" class="bootstrap-checkbox" checked="checked" data-label-prepend="Enable Heatmap  " /> </p>

						<!--
						table <input id="track-table" type=text><br/>
						<div id="graph_stat_string"></div>
						community id <input id="comm-id" type=text><br/>
						level <input id="level" type=text><br/>
						-->

					</div>
					
					<div data-tangelo-type="info">
						<p> TODO: Description or instructions on how to use the tool goes here. </p>
					</div>

				</div>
			</div>
		</div>
		<div class="row-fluid" style="padding-top:20px;">
			<div class="span4" style="">
				<h4> Community Browser </h4>
				
				<div id="communityBrowserForm">				
					<div class="alert alert-error">
						<h5> Your data set is not loaded or too large! </h5>
						<p> Use the Config tab to load your data set, <br/> ... or use the Settings panel to capture your area of interest. </p>
						
					</div>
				</div>
				
				<div id="communityBrowserGraph" style="display:none;">
					<div style="height:100%; width:100%">
						<svg id="community-graph">
							<rect width="100%" height="100%" style="fill:white;" />
							<g id="cblinks"></g>
							<g id="cbnodes"></g>
						</svg>
					</div>
				</div>

			</div>
			<div class="span4" style="margin-right: 2px; ">
				<h4> Map </h4>
				<div id="map-canvas" class="gmap" style="">***</div>
			</div>
			<div class="span4" style="margin-left: 2px; ">
				<h4> Dynamic Graph </h4>
				<div style="height:100%; width:100%">
					<svg id="dynamic-graph">
						<rect width="100%" height="100%" style="fill:black;" />
						<g id="dglinks"></g>
						<g id="dgnodes"></g>
					</svg>
				</div>
			</div>
		</div>
	</div>

	<!-- Create a drawer panel with the controls in it -->
	<div data-tangelo-type="control-panel" class="control-panel">
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span4">
                    <h5> Community </h5>
					
					<p> <small> <strong>INFO:</strong> <span id="graph_stat_string">Data not loaded.</span> </small> </p>
					<p id="community-info-box" style="display:none;">
					<strong>ID&nbsp;:</strong> <input id="comm-id" type="text" />
					<strong>LVL:</strong> 
					<input id="level" type="text" />
					<input id="graph_num_levels" type="hidden" />
					<a id="applyCommunityFilter" class="btn btn-mini" href="#"><i class="icon-search"></i> Go</a>
					</p>

				</div>
				<!--
				<div class="span2">
					<h4> Heatmap </h4>
					<div> &nbsp; </div>
					<p>
					<a id="heatmap" class="btn btn-mini">Show</a>
					<a id="heatmap-remove" class="btn btn-mini">Hide</a>
					<a id="loadCommunitiesFromFilter" class="btn btn-mini btn-primary">Load from Map</a>
					</p>
				</div>	
				-->
				<div class="span4">
					<h5>Timeline</h5>
					<div id="time-slider"></div>
					<div id="slidertext">0</div>
				</div>
				<div class="spa4">
					<h5>Animation</h5>
					<a id="play" class="btn btn-mini">Play</a>
					<div id="speed-slider"></div>
				</div>
			</div>

		</div>
	</div>
	
    <!-- Scripts/Application -->
    <script type="text/javascript" src="js/app/main.js"></script> 
	<script type="text/javascript">
		$(document).ready( function() {
			
			$("#track-table").select2({
				width: '200',
				placeholder: "Select a data set...",
				ajax: {
					url: "/community/tables",
					dataType: 'json',
					results: function (data, page) { 
						var results = [];
						for (var i=0, len=data.tables.length; i<len; i++) {
							var t = data.tables[i];
							results.push({
								id: t,
								text: t
							});
						}
						return {"results": results};
					}
				},
				initSelection : function (element, callback) {
					var data = {id: element.val(), text: element.val()};
					callback(data);
				}				
			});
			$("#level").select2({
				width: "resolve",
				placeholder: "No data set loaded...",
				allowClear: false,
				data: []
			});				
			
		});	
	</script>
	
</body>

</html>
